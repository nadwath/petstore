<div class="d-flex justify-content-between align-items-center mb-4">
  <h2 class="mb-0">Users</h2>
  <div>
    <button class="btn btn-success me-2" *ngIf="isAdmin()" (click)="toggleCreateForm()">
      <i class="bi bi-plus-circle"></i> {{ showCreateForm ? 'Cancel' : 'Add User' }}
    </button>
    <button class="btn btn-primary" (click)="load()">
      <i class="bi bi-arrow-clockwise"></i> Refresh
    </button>
  </div>
</div>

<!-- Create User Form Component -->
<app-create-user 
  *ngIf="showCreateForm" 
  (userCreated)="onUserCreated()" 
  (cancelled)="onCreateCancelled()">
</app-create-user>

<div class="row">
  <div class="col-12">
    <div class="table-responsive">
      <table class="table table-striped table-hover">
        <thead>
          <tr>
            <th>Username</th>
            <th>Email</th>
            <th>First Name</th>
            <th>Last Name</th>
            <th>Phone</th>
            <th>Status</th>
            <th *ngIf="isAdmin()">Actions</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let user of users">
            <td>{{user.username}}</td>
            <td>{{user.email || '-'}}</td>
            <td>{{user.firstName || '-'}}</td>
            <td>{{user.lastName || '-'}}</td>
            <td>{{user.phone || '-'}}</td>
            <td>
              <span class="badge" [ngClass]="user.userStatus === 1 ? 'bg-success' : 'bg-secondary'">
                {{user.userStatus === 1 ? 'Active' : 'Inactive'}}
              </span>
            </td>
            <td *ngIf="isAdmin()">
              <button class="btn btn-sm btn-outline-danger" (click)="deleteUser(user)" title="Delete">
                <i class="bi bi-trash"></i>
              </button>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>

<div *ngIf="users.length === 0" class="alert alert-info">
  No users found.
</div>
